import{_ as P,e as p,r as o,o as v,c as N,w as l,a as e,f as y,F as R,g as H,b as q,h as W,t as F,d as x,n as Y,i as Z,j as G,k as K,l as J,m as Q,p as X,u as ee,q as oe,s as te,v as ne}from"./index-B42yJtgC.js";const le={class:"d-flex align-center justify-space-between"},ae=["onDblclick"],se={class:"text-center"},de={class:"px-4"},ie={key:0},re={__name:"TodoDataIteratorComponent",props:{todos:{type:Array,require:!0}},emits:["delete-confirm","update-todo"],setup(B,{emit:b}){const C=b,s=p(!1),c=p(null),f=p(""),g=(m,i)=>{const d={name:m,id:i};m.trim()!=""?d.name=m:d.name=f.value,C("update-todo",d),c.value=null},T=(m,i)=>{c.value=m,f.value=i},I=m=>{C("delete-confirm",m),s.value=!1};return(m,i)=>{const d=o("v-text-field"),a=o("v-card-title"),w=o("v-btn"),V=o("v-card"),U=o("v-dialog"),D=o("v-card-text"),k=o("v-switch"),n=o("v-divider"),t=o("v-list-item"),h=o("v-list"),S=o("v-expand-transition"),_=o("RouterLink"),E=o("v-card-actions"),$=o("v-col"),L=o("v-row"),j=o("v-data-iterator");return v(),N(j,{items:B.todos,"item-value":"name"},{default:l(({items:M,isExpanded:A,toggleExpand:O})=>[e(L,null,{default:l(()=>[(v(!0),y(R,null,H(M,(r,z)=>(v(),N($,{key:r.raw._id,cols:"12",md:"6",sm:"12"},{default:l(()=>[e(V,null,{default:l(()=>[q("div",le,[e(a,{class:"d-flex align-center"},{default:l(()=>[c.value===z?(v(),N(d,{key:0,modelValue:r.raw.name,"onUpdate:modelValue":u=>r.raw.name=u,onBlur:u=>g(r.raw.name,r.raw._id),onKeydown:W(u=>g(r.raw.name,r.raw._id),["enter"]),label:"Editar",dense:"",width:"200px",autofocus:"",variant:"plain"},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeydown"])):(v(),y("h4",{key:1,class:"cursor-pointer",onDblclick:u=>T(z,r.raw.name)},F(r.raw.name),41,ae))]),_:2},1024),q("div",se,[e(w,{onClick:i[0]||(i[0]=u=>s.value=!0),icon:"mdi-delete-circle",variant:"plain"}),e(U,{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=u=>s.value=u),width:"auto"},{default:l(()=>[e(V,{"max-width":"400","prepend-icon":"mdi-update",text:"Are you sure?",title:"Delete?"},{actions:l(()=>[e(w,{class:"ms-auto",text:"Cancel",onClick:i[1]||(i[1]=u=>s.value=!1)}),e(w,{class:"ms-auto",text:"Confirm",onClick:u=>I(r.raw._id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["modelValue"])])]),e(D,null,{default:l(()=>[x(F(r.raw.description),1)]),_:2},1024),q("div",de,[e(k,{label:`${A(r)?"Hide":"Show"} details`,"model-value":A(r),density:"compact",inset:"",onClick:()=>O(r)},null,8,["label","model-value","onClick"])]),e(n),e(S,null,{default:l(()=>[A(r)?(v(),y("div",ie,[(v(!0),y(R,null,H(r.raw.tasks,u=>(v(),N(h,{lines:!1,density:"compact",key:u._id},{default:l(()=>[e(t,{class:Y({done:u.done})},{default:l(()=>[x(F(u.task),1)]),_:2},1032,["class"])]),_:2},1024))),128))])):Z("",!0)]),_:2},1024),e(E,null,{default:l(()=>[e(_,{to:`/todo/${r.raw._id}`},{default:l(()=>i[3]||(i[3]=[x("View Todo")])),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:1},8,["items"])}}},ce=P(re,[["__scopeId","data-v-596b7628"]]),ue={__name:"TodoForm",props:["dialog"],emits:["new-todo","close"],setup(B,{emit:b}){const C=b,s=p({valid:!1,name:"",description:""}),c=p({required:d=>!!d||"Field is required"}),f=({name:d,description:a})=>({name:d,description:a}),g=()=>({name:"",description:""}),T=()=>{s.value=g()},I=()=>{const d=s.value.valid?f(s.value):null;C("new-todo",d),T()},i=G(B,"dialog");return(d,a)=>{const w=o("v-text-field"),V=o("v-col"),U=o("v-row"),D=o("v-form"),k=o("v-spacer"),n=o("v-btn"),t=o("v-card-actions"),h=o("v-card"),S=o("v-dialog");return v(),N(S,{modelValue:i.value,"onUpdate:modelValue":a[4]||(a[4]=_=>i.value=_),"max-width":"500"},{default:l(()=>[e(h,null,{default:l(()=>[e(D,{modelValue:s.value.valid,"onUpdate:modelValue":a[2]||(a[2]=_=>s.value.valid=_)},{default:l(()=>[e(U,{dense:""},{default:l(()=>[e(V,{cols:"12",sm:"6"},{default:l(()=>[e(w,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=_=>s.value.name=_),hint:"Todo name",label:"Todo name*",required:"",rules:[c.value.required]},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",sm:"6"},{default:l(()=>[e(w,{modelValue:s.value.description,"onUpdate:modelValue":a[1]||(a[1]=_=>s.value.description=_),label:"Description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(t,null,{default:l(()=>[e(k),e(n,{color:"primary",variant:"text",onClick:a[3]||(a[3]=_=>d.$emit("close"))},{default:l(()=>a[5]||(a[5]=[x(" Cancel ")])),_:1}),e(n,{color:"primary",variant:"text",onClick:I,disabled:!s.value.valid},{default:l(()=>a[6]||(a[6]=[x(" Submit ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},_e={class:"text-h6 ma-4"},ve={class:"green"},me={key:0,class:"ma-4"},pe={key:1,class:"ma-4"},ge={__name:"UserView",setup(B){const b=p({info:{}}),C=K(()=>localStorage.getItem("username")||""),s=K(()=>{var n;return!!((n=b.value.info.todo)!=null&&n.length)}),c=p(!1),f=p(!1),g=p(""),T=p("");J(()=>i());const I=()=>localStorage.getItem("token"),m=()=>window.location.href="/",i=()=>I()?d():m(),d=()=>{Q().then(n=>{b.value={...n.data}}).catch(n=>k(n))},a=n=>{console.log(n),oe(n).then(()=>{d(),c.value=!1}).catch(t=>k(t))},w=n=>{te(n.id,{name:n.name}).then(()=>d()).catch(t=>k(t))},V=n=>{ne(n).then(()=>d()).catch(t=>k(t))},U=()=>{console.warn("Error 401: UNAUTHORIZED"),g.value="Session Expired",T.value="Your session has been expired, please login again",f.value=!0},D=()=>{ee({}),localStorage.removeItem("token"),localStorage.removeItem("username"),location.href="/"},k=n=>{const{response:t}=n;t&&t.status===401?(U(),console.log(t.data.msg)):(console.log(n.message),g.value="Something got wrong",f.value=!0)};return(n,t)=>{const h=o("v-fab"),S=o("v-sheet"),_=o("v-btn"),E=o("v-container");return v(),y(R,null,[e(E,null,{default:l(()=>[e(S,{class:"ma-10"},{default:l(()=>[e(h,{class:"ms-4",color:"indigo",icon:"mdi-plus",location:"top right",size:"40",absolute:"",offset:"",onClick:t[0]||(t[0]=$=>c.value=!c.value)})]),_:1}),e(ue,{dialog:c.value,"onUpdate:dialog":t[1]||(t[1]=$=>c.value=$),onClose:t[2]||(t[2]=$=>c.value=!1),onNewTodo:a},null,8,["dialog"]),q("div",_e,[t[4]||(t[4]=x(" Welcome to your todo page ")),q("span",ve,F(C.value),1)]),s.value?(v(),y("div",pe,"Tips: Double click on list name to edit")):(v(),y("div",me,[t[5]||(t[5]=x(" Tips: Click on blue ")),e(_,{class:"ma-4",icon:"mdi-plus",color:"indigo",size:"40",onClick:t[3]||(t[3]=$=>c.value=!0)}),t[6]||(t[6]=x(" to create a todo list "))])),e(ce,{todos:b.value.info.todo,onDeleteConfirm:V,onUpdateTodo:w},null,8,["todos"])]),_:1}),e(X,{msg:g.value,text:T.value,dialog:f.value,onClose:D},null,8,["msg","text","dialog"])],64)}}};export{ge as default};
