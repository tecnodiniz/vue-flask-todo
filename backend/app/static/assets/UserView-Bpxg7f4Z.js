import{_ as G,e as y,r as t,o as r,c as b,w as l,a as o,f as C,F,g as S,b as T,h as J,t as U,d as m,n as O,i as P,j as Q,k as X,l as Y,m as Z,u as h,p as ee}from"./index-C5mZMSDu.js";const oe={class:"d-flex align-center justify-space-between"},te=["onDblclick"],ne={class:"text-center"},ae={class:"px-4"},le={key:0},se={__name:"TodoDataIteratorComponent",props:{todos:{type:Array,require:!0}},emits:["delete-confirm","update-todo"],setup(D,{emit:u}){const k=u,n=y(!1),p=y(null),f=y(""),g=(a,e)=>{const v={name:a,id:e};a.trim()!=""?v.name=a:v.name=f.value,k("update-todo",v),p.value=null},_=(a,e)=>{p.value=a,f.value=e},s=a=>{k("delete-confirm",a),n.value=!1};return(a,e)=>{const v=t("v-text-field"),$=t("v-card-title"),x=t("v-btn"),V=t("v-card"),w=t("v-dialog"),I=t("v-card-text"),B=t("v-switch"),c=t("v-divider"),z=t("v-list-item"),K=t("v-list"),L=t("v-expand-transition"),R=t("RouterLink"),j=t("v-card-actions"),A=t("v-col"),H=t("v-row"),M=t("v-data-iterator");return r(),b(M,{items:D.todos,"item-value":"name"},{default:l(({items:W,isExpanded:N,toggleExpand:E})=>[o(H,null,{default:l(()=>[(r(!0),C(F,null,S(W,(d,q)=>(r(),b(A,{key:d.raw._id,cols:"12",md:"6",sm:"12"},{default:l(()=>[o(V,null,{default:l(()=>[T("div",oe,[o($,{class:"d-flex align-center"},{default:l(()=>[p.value===q?(r(),b(v,{key:0,modelValue:d.raw.name,"onUpdate:modelValue":i=>d.raw.name=i,onBlur:i=>g(d.raw.name,d.raw._id),onKeydown:J(i=>g(d.raw.name,d.raw._id),["enter"]),label:"Editar",dense:"",width:"200px",autofocus:"",variant:"plain"},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeydown"])):(r(),C("h4",{key:1,class:"cursor-pointer",onDblclick:i=>_(q,d.raw.name)},U(d.raw.name),41,te))]),_:2},1024),T("div",ne,[o(x,{onClick:e[0]||(e[0]=i=>n.value=!0),icon:"mdi-delete-circle",variant:"plain"}),o(w,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=i=>n.value=i),width:"auto"},{default:l(()=>[o(V,{"max-width":"400","prepend-icon":"mdi-update",text:"Are you sure?",title:"Delete?"},{actions:l(()=>[o(x,{class:"ms-auto",text:"Cancel",onClick:e[1]||(e[1]=i=>n.value=!1)}),o(x,{class:"ms-auto",text:"Confirm",onClick:i=>s(d.raw._id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["modelValue"])])]),o(I,null,{default:l(()=>[m(U(d.raw.description),1)]),_:2},1024),T("div",ae,[o(B,{label:`${N(d)?"Hide":"Show"} details`,"model-value":N(d),density:"compact",inset:"",onClick:()=>E(d)},null,8,["label","model-value","onClick"])]),o(c),o(L,null,{default:l(()=>[N(d)?(r(),C("div",le,[(r(!0),C(F,null,S(d.raw.tasks,i=>(r(),b(K,{lines:!1,density:"compact",key:i._id},{default:l(()=>[o(z,{class:O({done:i.done})},{default:l(()=>[m(U(i.task),1)]),_:2},1032,["class"])]),_:2},1024))),128))])):P("",!0)]),_:2},1024),o(j,null,{default:l(()=>[o(R,{to:`/todo/${d.raw._id}`},{default:l(()=>e[3]||(e[3]=[m("View Todo")])),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:1},8,["items"])}}},de=G(se,[["__scopeId","data-v-596b7628"]]),ie={__name:"TodoForm",props:["dialog"],emits:["new-todo","close"],setup(D,{emit:u}){const k=u,n=y({valid:!1,name:"",description:"",rule:{required:_=>!!_||"Field is required"}}),p=()=>{if(n.value.valid){const _={name:n.value.name,description:n.value.description};n.value.name="",n.value.description="",k("new-todo",_),g.value=!1}},g=Q(D,"dialog");return(_,s)=>{const a=t("v-text-field"),e=t("v-col"),v=t("v-row"),$=t("v-form"),x=t("v-spacer"),V=t("v-btn"),w=t("v-card-actions"),I=t("v-card"),B=t("v-dialog");return r(),b(B,{modelValue:g.value,"onUpdate:modelValue":s[4]||(s[4]=c=>g.value=c),"max-width":"500"},{default:l(()=>[o(I,null,{default:l(()=>[o($,{modelValue:n.value.valid,"onUpdate:modelValue":s[2]||(s[2]=c=>n.value.valid=c)},{default:l(()=>[o(v,{dense:""},{default:l(()=>[o(e,{cols:"12",sm:"6"},{default:l(()=>[o(a,{modelValue:n.value.name,"onUpdate:modelValue":s[0]||(s[0]=c=>n.value.name=c),hint:"Todo name",label:"Todo name*",required:"",rules:[n.value.rule.required]},null,8,["modelValue","rules"])]),_:1}),o(e,{cols:"12",sm:"6"},{default:l(()=>[o(a,{modelValue:n.value.description,"onUpdate:modelValue":s[1]||(s[1]=c=>n.value.description=c),label:"Description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(w,null,{default:l(()=>[o(x),o(V,{color:"primary",variant:"text",onClick:s[3]||(s[3]=c=>_.$emit("close"))},{default:l(()=>s[5]||(s[5]=[m(" Cancel ")])),_:1}),o(V,{color:"primary",variant:"text",onClick:p},{default:l(()=>s[6]||(s[6]=[m(" Submit ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},re={class:"text-h6 ma-4"},ce={class:"green"},ue={key:0,class:"ma-4"},_e={key:1,class:"ma-4"},me={__name:"UserView",setup(D){const u=y({info:{}}),k=y(0),n=y(!1),p=y("");X(()=>{localStorage.getItem("token")?(f(),console.log(u.value)):location.href="/"});const f=async()=>{try{const a=await Y();a&&a.data&&(u.value.info=a.data.info,p.value=u.value.info.user.name,k.value=u.value.info.todo.length)}catch(a){console.log(a.message)}},g=async a=>{try{const e=await Z(a);e.data?(console.log(e.data),n.value=!1,f()):console.log(e.data)}catch(e){console.log(e)}},_=async a=>{try{console.log(a);const e=await h(a.id,{name:a.name});if(e.data)console.log(e.data),f();else return}catch(e){console.log(e)}},s=async a=>{try{const e=await ee(a);e.data&&(console.log(e.data),f())}catch(e){console.log(e)}};return(a,e)=>{const v=t("v-fab"),$=t("v-sheet"),x=t("v-btn"),V=t("v-container");return r(),b(V,null,{default:l(()=>[o($,{class:"ma-10"},{default:l(()=>[o(v,{class:"ms-4",color:"indigo",icon:"mdi-plus",location:"top right",size:"40",absolute:"",offset:"",onClick:e[0]||(e[0]=w=>n.value=!n.value)})]),_:1}),o(ie,{dialog:n.value,"onUpdate:dialog":e[1]||(e[1]=w=>n.value=w),onClose:e[2]||(e[2]=w=>n.value=!1),onNewTodo:g},null,8,["dialog"]),T("div",re,[e[4]||(e[4]=m(" Welcome to your todo page ")),T("span",ce,U(p.value),1)]),m(" "+U()+" ",1),k.value===0?(r(),C("div",ue,[e[5]||(e[5]=m("Tips: Click on blue ")),o(x,{class:"ma-4",icon:"mdi-plus",color:"indigo",size:"40",onClick:e[3]||(e[3]=w=>n.value=!n.value)}),e[6]||(e[6]=m(" to create a todo list"))])):(r(),C("div",_e,"Tips: Double click on list name to edit ")),o(de,{todos:u.value.info.todo,onDeleteConfirm:s,onUpdateTodo:_},null,8,["todos"])]),_:1})}}};export{me as default};
