import{_ as E,e as k,r as t,o as u,c as y,w as l,a as o,f as C,F as A,g as K,b as D,h as G,t as B,d as f,n as J,i as O,j as Q,k as L,l as X,m as Y,p as Z,u as ee,q as oe}from"./index-by2w3vC7.js";const te={class:"d-flex align-center justify-space-between"},ne=["onDblclick"],le={class:"text-center"},ae={class:"px-4"},se={key:0},de={__name:"TodoDataIteratorComponent",props:{todos:{type:Array,require:!0}},emits:["delete-confirm","update-todo"],setup(q,{emit:w}){const x=w,a=k(!1),r=k(null),V=k(""),b=(_,s)=>{const i={name:_,id:s};_.trim()!=""?i.name=_:i.name=V.value,x("update-todo",i),r.value=null},T=(_,s)=>{r.value=_,V.value=s},p=_=>{x("delete-confirm",_),a.value=!1};return(_,s)=>{const i=t("v-text-field"),e=t("v-card-title"),n=t("v-btn"),g=t("v-card"),$=t("v-dialog"),U=t("v-card-text"),I=t("v-switch"),m=t("v-divider"),F=t("v-list-item"),N=t("v-list"),h=t("v-expand-transition"),v=t("RouterLink"),R=t("v-card-actions"),j=t("v-col"),H=t("v-row"),M=t("v-data-iterator");return u(),y(M,{items:q.todos,"item-value":"name"},{default:l(({items:P,isExpanded:S,toggleExpand:W})=>[o(H,null,{default:l(()=>[(u(!0),C(A,null,K(P,(d,z)=>(u(),y(j,{key:d.raw._id,cols:"12",md:"6",sm:"12"},{default:l(()=>[o(g,null,{default:l(()=>[D("div",te,[o(e,{class:"d-flex align-center"},{default:l(()=>[r.value===z?(u(),y(i,{key:0,modelValue:d.raw.name,"onUpdate:modelValue":c=>d.raw.name=c,onBlur:c=>b(d.raw.name,d.raw._id),onKeydown:G(c=>b(d.raw.name,d.raw._id),["enter"]),label:"Editar",dense:"",width:"200px",autofocus:"",variant:"plain"},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeydown"])):(u(),C("h4",{key:1,class:"cursor-pointer",onDblclick:c=>T(z,d.raw.name)},B(d.raw.name),41,ne))]),_:2},1024),D("div",le,[o(n,{onClick:s[0]||(s[0]=c=>a.value=!0),icon:"mdi-delete-circle",variant:"plain"}),o($,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=c=>a.value=c),width:"auto"},{default:l(()=>[o(g,{"max-width":"400","prepend-icon":"mdi-update",text:"Are you sure?",title:"Delete?"},{actions:l(()=>[o(n,{class:"ms-auto",text:"Cancel",onClick:s[1]||(s[1]=c=>a.value=!1)}),o(n,{class:"ms-auto",text:"Confirm",onClick:c=>p(d.raw._id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["modelValue"])])]),o(U,null,{default:l(()=>[f(B(d.raw.description),1)]),_:2},1024),D("div",ae,[o(I,{label:`${S(d)?"Hide":"Show"} details`,"model-value":S(d),density:"compact",inset:"",onClick:()=>W(d)},null,8,["label","model-value","onClick"])]),o(m),o(h,null,{default:l(()=>[S(d)?(u(),C("div",se,[(u(!0),C(A,null,K(d.raw.tasks,c=>(u(),y(N,{lines:!1,density:"compact",key:c._id},{default:l(()=>[o(F,{class:J({done:c.done})},{default:l(()=>[f(B(c.task),1)]),_:2},1032,["class"])]),_:2},1024))),128))])):O("",!0)]),_:2},1024),o(R,null,{default:l(()=>[o(v,{to:`/todo/${d.raw._id}`},{default:l(()=>s[3]||(s[3]=[f("View Todo")])),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:1},8,["items"])}}},ie=E(de,[["__scopeId","data-v-596b7628"]]),re={__name:"TodoForm",props:["dialog"],emits:["new-todo","close"],setup(q,{emit:w}){const x=w,a=k({valid:!1,name:"",description:""}),r=k({required:i=>!!i||"Field is required"}),V=({name:i,description:e})=>({name:i,description:e}),b=()=>({name:"",description:""}),T=()=>{a.value=b()},p=()=>{const i=a.value.valid?V(a.value):null;x("new-todo",i),T()},s=Q(q,"dialog");return(i,e)=>{const n=t("v-text-field"),g=t("v-col"),$=t("v-row"),U=t("v-form"),I=t("v-spacer"),m=t("v-btn"),F=t("v-card-actions"),N=t("v-card"),h=t("v-dialog");return u(),y(h,{modelValue:s.value,"onUpdate:modelValue":e[4]||(e[4]=v=>s.value=v),"max-width":"500"},{default:l(()=>[o(N,null,{default:l(()=>[o(U,{modelValue:a.value.valid,"onUpdate:modelValue":e[2]||(e[2]=v=>a.value.valid=v)},{default:l(()=>[o($,{dense:""},{default:l(()=>[o(g,{cols:"12",sm:"6"},{default:l(()=>[o(n,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=v=>a.value.name=v),hint:"Todo name",label:"Todo name*",required:"",rules:[r.value.required]},null,8,["modelValue","rules"])]),_:1}),o(g,{cols:"12",sm:"6"},{default:l(()=>[o(n,{modelValue:a.value.description,"onUpdate:modelValue":e[1]||(e[1]=v=>a.value.description=v),label:"Description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(F,null,{default:l(()=>[o(I),o(m,{color:"primary",variant:"text",onClick:e[3]||(e[3]=v=>i.$emit("close"))},{default:l(()=>e[5]||(e[5]=[f(" Cancel ")])),_:1}),o(m,{color:"primary",variant:"text",onClick:p,disabled:!a.value.valid},{default:l(()=>e[6]||(e[6]=[f(" Submit ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},ce={class:"text-h6 ma-4"},ue={class:"green"},_e={key:0,class:"ma-4"},ve={key:1,class:"ma-4"},pe={__name:"UserView",setup(q){const w=k({info:{}}),x=L(()=>localStorage.getItem("username")||""),a=L(()=>{var e;return!!((e=w.value.info.todo)!=null&&e.length)}),r=k(!1);X(()=>T());const V=()=>localStorage.getItem("token"),b=()=>window.location.href="/",T=()=>V()?p():b(),p=()=>{Y().then(e=>{w.value={...e.data}}).catch(e=>console.log(e))},_=e=>{console.log(e),Z(e).then(()=>{p(),r.value=!1}).catch(n=>console.log(n))},s=e=>{ee(e.id,{name:e.name}).then(()=>p()).catch(n=>console.log(n))},i=e=>{oe(e).then(()=>p()).catch(n=>console.log(n))};return(e,n)=>{const g=t("v-fab"),$=t("v-sheet"),U=t("v-btn"),I=t("v-container");return u(),y(I,null,{default:l(()=>[o($,{class:"ma-10"},{default:l(()=>[o(g,{class:"ms-4",color:"indigo",icon:"mdi-plus",location:"top right",size:"40",absolute:"",offset:"",onClick:n[0]||(n[0]=m=>r.value=!r.value)})]),_:1}),o(re,{dialog:r.value,"onUpdate:dialog":n[1]||(n[1]=m=>r.value=m),onClose:n[2]||(n[2]=m=>r.value=!1),onNewTodo:_},null,8,["dialog"]),D("div",ce,[n[4]||(n[4]=f(" Welcome to your todo page ")),D("span",ue,B(x.value),1)]),a.value?(u(),C("div",ve,"Tips: Double click on list name to edit")):(u(),C("div",_e,[n[5]||(n[5]=f(" Tips: Click on blue ")),o(U,{class:"ma-4",icon:"mdi-plus",color:"indigo",size:"40",onClick:n[3]||(n[3]=m=>r.value=!0)}),n[6]||(n[6]=f(" to create a todo list "))])),o(ie,{todos:w.value.info.todo,onDeleteConfirm:i,onUpdateTodo:s},null,8,["todos"])]),_:1})}}};export{pe as default};
